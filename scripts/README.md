# Android Build Scripts

This directory contains automated scripts for building and signing Android APK and AAB files for the GuestSpot application.

## Available Scripts

### üöÄ `complete-android-build.sh`
**Complete automation script** - Handles the entire process from start to finish.

```bash
./scripts/complete-android-build.sh
```

**What it does:**
- Checks for keystore file and generates one if needed
- Configures signing passwords interactively
- Builds APK and/or AAB files based on your choice
- Signs all generated files
- Provides next steps and recommendations

**Use this when:** You want a fully automated experience or are building for the first time.

---

### üîê `generate-keystore.sh`
**Keystore generation script** - Creates a new JKS keystore file for signing.

```bash
./scripts/generate-keystore.sh
```

**What it does:**
- Generates a new JKS keystore file with secure settings
- Configures `local.properties` with keystore information
- Sets proper file permissions (600)
- Provides security reminders

**Use this when:** You need to create a new keystore or replace an existing one.

---

### ‚úçÔ∏è `sign-apk.sh`
**APK/AAB signing script** - Signs existing unsigned APK and AAB files.

```bash
./scripts/sign-apk.sh
```

**What it does:**
- Finds unsigned APK/AAB files in the project
- Signs them using the configured keystore
- Verifies signatures
- Copies signed files to `temp/` directory

**Use this when:** You have unsigned files that need to be signed.

---

### üì¶ `build-aab.sh`
**AAB build script** - Builds signed AAB and APK files using Gradle.

```bash
./scripts/build-aab.sh
```

**What it does:**
- Builds Quasar app for Capacitor
- Creates signed AAB and APK files using Gradle
- Copies files to `temp/` directory
- Validates AAB file (if bundletool is available)

**Use this when:** You want to build AAB files with Gradle signing (recommended for production).

## Workflow Examples

### First Time Setup
```bash
# Generate keystore and configure everything
./scripts/complete-android-build.sh
```

### Regular Development
```bash
# Build and sign everything
./scripts/build-aab.sh
```

### Sign Existing Files
```bash
# If you have unsigned files
./scripts/sign-apk.sh
```

## File Locations

After running the scripts, your signed files will be available in:

- **APK**: `temp/app-release-signed.apk`
- **AAB**: `temp/app-release-signed.aab`

## Prerequisites

- Node.js and npm/yarn
- Android SDK with build tools
- Java Development Kit (JDK)
- Keystore file (generated by scripts)

## Security Notes

- ‚ö†Ô∏è **Never commit keystore files** to version control
- üîí **Keep passwords secure** and use a password manager
- üíæ **Backup your keystore** file in a safe location
- üîÑ **Use the same keystore** for all future app updates

## Troubleshooting

If you encounter issues:

1. **Check Android SDK**: Ensure Android SDK and build tools are installed
2. **Verify Java**: Make sure JDK is properly installed
3. **Check permissions**: Ensure scripts have execute permissions
4. **Review logs**: Scripts provide detailed error messages

For more detailed information, see the documentation in the `docs/` directory.
